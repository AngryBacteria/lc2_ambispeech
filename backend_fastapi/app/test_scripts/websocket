@transcribeRouter.websocket("/whisper/stream")
async def stream(websocket: WebSocket):
    await websocket.accept()
    try:

        SAMPLING_RATE = 16000

        import torch
        torch.set_num_threads(1)

        from pprint import pprint
        # download example
        torch.hub.download_url_to_file('https://models.silero.ai/vad_models/en.wav', 'en_example.wav')

        model, utils = torch.hub.load(repo_or_dir='snakers4/silero-vad',
                                      model='silero_vad',
                                      force_reload=True,
                                      onnx=False)

        (get_speech_timestamps,
         save_audio,
         read_audio,
         VADIterator,
         collect_chunks) = utils

        while True:
            data = await websocket.receive_bytes()
            logger.debug(f"RECEIVED BYTES")

            wav = read_audio(io.BytesIO(data), sampling_rate=SAMPLING_RATE)
            # get speech timestamps from full audio file
            speech_timestamps = get_speech_timestamps(wav, model, sampling_rate=SAMPLING_RATE)
            pprint(speech_timestamps)
    except WebSocketDisconnect:
        logger.debug("DISCONNECTED FROM WEBSOCKET")